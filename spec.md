# 早餐店點餐管理系統 (BreakfastApp) - 技術規格書

## 1. 系統概述
本系統是一款專為台灣早餐店設計的桌面點餐管理應用程式。採用圖片直覺化介面，支援多樣化的產品規格（如加蛋、大中小杯、口味選擇），並具備完整的菜單管理與訂單統計功能。

## 2. 技術架構
*   **開發平台**：.NET 10.0 (C#)
*   **UI 框架**：Windows Forms (WinForms)
*   **資料儲存**：JSON 檔案 (本地端儲存)
*   **主要開發模組**：
    *   `Form1.cs`：主介面邏輯、動態 UI 建立與事件處理。
    *   `MenuService.cs`：負責菜單 JSON 的讀取、寫入、品項增刪與排序邏輯。
    *   `OrderService.cs`：負責訂單編號生成與歷史訂單資料維護。
    *   `PrintService.cs`：負責熱感應紙格式的收據 (客戶/廚房) 與菜單總表列印預覽。
    *   `DataModels.cs`：定義核心資料模型 (MenuItem, Category, Order, CartItem)。

## 3. 核心功能規格

### 3.1 菜單瀏覽與搜尋
*   **分頁顯示**：依據產品分類（如：土司類、漢堡類、飲料類）自動產生 Tab 分頁。
*   **直覺按鈕**：每個品項顯示圖片、編號及基本價格。
*   **智慧過濾**：提供關鍵字搜尋，可即時過濾全部分類中的品項。
*   **快取機制**：具備圖片縮圖快取功能，優化大批圖片載入效能，解決記憶體鎖定與溢位問題。

### 3.2 點餐邏輯 (智慧選擇)
*   **多重選項支援**：
    *   自動判定品項是否有「口味」或「價格規格」。
    *   點擊時若有多種價格（如：加蛋/原價、大/中/小杯、蛋餅皮/河粉皮），會自動彈出 ContextMenu 選單。
    *   支援多層次選單：先選口味（如：巧克力/草莓），再選規格（如：厚片/薄片）。
*   **購物車管理**：
    *   即時加減數量與刪除。
    *   自動合併相同品項與相同規格之條目。
    *   支援多選刪除與 Delete 鍵快捷操作。

### 3.3 訂單與列印
*   **結帳流程**：計算總金額，存入本地訂單歷史庫 (`orders.json`)。
*   **雙模式列印預覽**：
    *   **客戶收據**：包含單號、明細、總金額。
    *   **廚房製作單**：僅顯示品項及規格標註，不含價格。
*   **菜單總表**：可產生分頁的完整店內菜單價目表。

### 3.4 後台管理
*   **資料管理**：支援匯入/匯出自定義的 JSON 菜單檔案。
*   **商品維護**：內建 `EditItemForm`，支援完整的新增與修改功能。
*   **UI 佈局**：
    *   採用 `SplitContainer` 結構，固定菜單區與選購清單的比例。
    *   優化底部留白間距，確保最後一排圖片顯示完整。

## 4. 資料格式規範 (JSON)
*   **MenuItem** 欄位包含：`id`, `name`, `price_regular`, `price_with_egg`, `price_small`, `price_medium`, `price_large`, `price_danbing`, `price_hefen`, `flavors`, `image` 等。

## 5. UI 配置參數
*   **視窗尺寸**：1100 x 900 (可手動縮放，核心比例固定)。
*   **底部清單高度**：固定為 280px，確保上方圖片區至少顯示三排以上。
*   **圖片縮放**：按鈕縮圖固定寬度 300px，採 HighQualityBicubic 運算以節省記憶體資源。
